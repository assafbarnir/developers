<p>Logs request and response data to <a href="https://www.runscope.com/?utm_source=getqordoba&amp;utm_content=plugin">Runscope</a>. Using the Runscope Traffic Inspector, each API call can be fully viewed in it’s entirety. All traffic can be searched by keyword (headers and bodies are indexed) and attribute (i.e. status code, response size, response time, etc.). Using Runscope <a href="https://www.runscope.com/docs/alerts">Live Traffic Alerts</a>, API failures and exceptions can be caught, notifying your team about problems before your customers find out. Trigger alerts based on any part of the HTTP request or response, including header values, JSON or XML data, connection details and more. Alerts can be sent to Slack, HipChat, PagerDuty, email, or webhook notifications. Live Traffic Alerts is available on all medium and larger plans.</p>

<hr />

<h2 id="how-it-works">How it works</h2>

<p>This plugin sends API traffic data to your Runscope bucket using the <a href="https://www.runscope.com/docs/api">Runscope API</a>.</p>

<p>It is important to be aware of performance when configuring this plugin. For example, be aware that logging the request and response bodies might slow down your traffic if your API is under heavy load. If your API works with significantly large request or response bodies, consider turning off this feature by updating the <code class="highlighter-rouge">log_body</code> configuration.</p>

<hr />

<h2 id="configuration">Configuration</h2>

<p>Configuring the plugin is straightforward, you can add it on top of an <a href="/docs/latest/admin-api/#api-object">API</a> (or <a href="/docs/latest/admin-api/#consumer-object">Consumer</a>) by executing the following request on your Qordoba server:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>curl -X POST http://qordoba:8001/apis/<span class="o">{</span>api<span class="o">}</span>/plugins/ <span class="se">\</span>
    --data <span class="s2">"name=runscope"</span> <span class="se">\</span>
    --data <span class="s2">"config.bucket_key=YOUR_BUCKET_KEY"</span> <span class="se">\</span>
    --data <span class="s2">"config.access_token=YOUR_ACCESS_TOKEN"</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">api</code>: The <code class="highlighter-rouge">id</code> or <code class="highlighter-rouge">name</code> of the API that this plugin configuration will target</p>

<p>You can also apply it for every API using the <code class="highlighter-rouge">http://qordoba:8001/plugins/</code> endpoint. Read the <a href="/docs/latest/admin-api/#add-plugin">Plugin Reference</a> for more information.</p>

<table>
  <thead>
    <tr>
      <th>parameter</th>
      <th>default</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">name</code></td>
      <td> </td>
      <td>The name of the plugin to use, in this case: <code class="highlighter-rouge">runscope</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">config.access_token</code></td>
      <td> </td>
      <td>The Runscope <a href="http://blog.runscope.com/posts/getting-started-with-the-runscope-api">access token</a> (or personal access token) for the Runscope API.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">config.bucket_key</code></td>
      <td> </td>
      <td>Your Runscope <a href="https://www.runscope.com/docs/buckets">bucket</a> ID where traffic data will be stored.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">config.log_body</code><br /><em>optional</em></td>
      <td><code class="highlighter-rouge">false</code></td>
      <td>Whether or not the request and response bodies should be sent to Runscope.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">config.api_endpoint</code><br /><em>optional</em></td>
      <td><code class="highlighter-rouge">https://api.runscope.com</code></td>
      <td>URL for the Runscope API.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">config.timeout</code><br /><em>optional</em></td>
      <td><code class="highlighter-rouge">10000</code></td>
      <td>An optional timeout in milliseconds when sending data to Runscope.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">config.keepalive</code><br /><em>optional</em></td>
      <td><code class="highlighter-rouge">30</code></td>
      <td>An optional value in milliseconds that defines for how long an idle connection will live before being closed.</td>
    </tr>
  </tbody>
</table>

<h2 id="qordoba-process-errors">Qordoba Process Errors</h2>

<p>This logging plugin will only log HTTP request and response data. If you are looking for the Qordoba process error file (which is the nginx error file), then you can find it at the following path: {<a href="/docs/0.2.x/configuration/#prefix">prefix</a>}/logs/error.log</p>

