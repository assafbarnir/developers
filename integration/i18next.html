<p>The Qordoba i18next plugin makes it easy to sync locales files between any i18next project and Qordoba.</p>

<h2 id="getting-started">Getting Started</h2>

<p>To get started, clone or download the repo from GitHub. Use <code class="highlighter-rouge">npm</code> to install the repo in the root directory and download dependencies for the plugin. If you want to run the example app, <code class="highlighter-rouge">cd</code> into the <code class="highlighter-rouge">/example</code> directory and run <code class="highlighter-rouge">npm install</code>.</p>

<p>Before starting, visit Qordoba.com, set up an account and create a new project. If you are running the example app, set English as the source language, and pick a few target languages. Select <strong>JSON</strong> (not <strong>JSON(custom)</strong>) as your file type. Set up translation memories, etc.</p>

<p>Once the app is created, get values for the <code class="highlighter-rouge">consumerKey</code>, <code class="highlighter-rouge">organizationId</code>, and <code class="highlighter-rouge">projectId</code>.</p>

<p>After setting up a project and getting your configuration keys you are ready to run the example app.</p>

<h2 id="qordoba-i18next-plugin-file-structure">Qordoba-i18next-plugin file structure.</h2>
<p>The plugin’s file structure is as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>├── root
│   ├── example // example app for project
│   ├── lib // transplied ES6 code
│   ├── src
│   │   ├── index.js // i18next-node-fs-backend (see below)
│   │   ├── qordoba.js // main functionality, handles sync between qordoba and filesystem
│   │   ├── utils.js // helper functions for i18next-node-fs-backend
│   ├── test
│   ├── gulpfile.js // handles 'gulp build' command
│   ├── package.json
</code></pre>
</div>

<p>Example App File Structure.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>├── example
│   ├── build  // compiled ES5 code
│   ├── locales
│   │   ├── en // i18next-node-fs-backend (see below)
│   │   │   ├── namespace1.json // this is where keys are linked to translated strings
│   │   │   ├── namespace2.json
│   │   ├── qordoba // built by plugin
│   │   │   ├── es, da, etc  // all your target languages
│   │   │   ├── files
│   │   │   │   ├── source.json // metadata for source files, timestamps, fileIds, etc
│   │   │   │   ├── target.json // metadata for target files, timestamps
│   ├── public
│   ├── src
│   │   ├── assets
│   │   ├── components
│   │   ├── index.js // main entry point for react app
│   ├── style
│   ├── server
│   │   ├── server.js // main entry point for express server (CONFIG GOES HERE)
│   ├── webpack.config.js
│   ├── package.json
</code></pre>
</div>

<p>To run the example app, go into the server and add you keys.</p>
<ul>
  <li>ORGANIZATION_ID // id of your qordoba organization</li>
  <li>PROJECT_ID // id qordoba give you when you create a new project</li>
  <li>MILESTONE_ID // id of milestone (eg. ‘Proofreading’ ) that you want to pull translations from</li>
  <li>CONSUMER_KEY // secret key to access API</li>
</ul>

<p>Then ‘npm run build’ to transplile your configuration into build directory.</p>

<p>If you just created a new project, check for the qoroba folder in ‘root/example/locales’, delete this folder if it exists. The plugin handles synching your source keys / strings from ‘i18next/<source language="" />’. It will take all your source files, copy them over to the qordoba directory, then upload these files to qordoba and download and build folders and namespaces for all target languages.</p>

<h3 id="scripts">Scripts</h3>

<p>Root Directory</p>
<ul>
  <li>‘gulp build’ - transpliles ES6 code from src -&gt; lib into ES5. Provides runtime support for promises.</li>
  <li>‘npm test’ - run mocha tests for plugin.</li>
</ul>

<p>Example app</p>
<ul>
  <li>‘npm run build’ - transpiles ES6 code from src -&gt; build. Builds production bundle for app.</li>
  <li>‘npm start’ - starts express server in server/server.js. Serves example app to localhost:3000</li>
</ul>

<h3 id="prerequisites">Prerequisites</h3>

<ul>
  <li>
    <p>Familiarity with the i18next internationalization framework.</p>
  </li>
  <li>
    <p>I18next-node-fs-backend. This is what handles loading the locales files into the i18next framework.</p>
  </li>
</ul>

<h3 id="prerequisites-for-the-example-app">Prerequisites for the example app</h3>

<ul>
  <li>
    <p>React-18next internationalization plugin - a higher order component to provide the i18next functionality to react components.</p>
  </li>
  <li>
    <p>I18next-express-middleware - middleware to use i18next in express.js. Supports multiloading of backend routes, etc.</p>
  </li>
</ul>

<h2 id="running-the-tests">Running the tests</h2>

<p>‘npm test’ in the root directory</p>

<h2 id="built-with">Built With</h2>

<ul>
  <li><a href="http://i18next.com/">i18next</a> - Internationalization ecosystem</li>
  <li><a href="https://github.com/i18next/i18next-node-fs-backend/">i18next-node-fs-backend</a> - I18next node backend for node.js</li>
  <li><a href="https://github.com/i18next/react-i18next">react-i18next</a> - Internationalization for react done right.</li>
  <li><a href="https://github.com/i18next/i18next-express-middleware">i18next-express-middleware</a> - express middleware for i18next</li>
</ul>

<h2 id="versioning">Versioning</h2>

<p>// to do once published to npm</p>

<h2 id="authors">Authors</h2>

<ul>
  <li><strong>Erik Suddath</strong> -</li>
</ul>

<h2 id="license">License</h2>

<p>This project is licensed under the MIT License - see the <a href="LICENSE.md">LICENSE.md</a> file for details</p>

<p>Qordoba-Node-Backend-Plugin for i18next using Qordoba files API</p>
<ul>
  <li>Source can be loaded via npm</li>
  <li>Will sync the data source (source language files) between i18next and Qordoba</li>
  <li>Will handle checking Qordoba for updates, downloading updated files and writing translations to file system</li>
  <li>Will serve files from Qordoba locales folder in fs</li>
</ul>

<h3 id="run-options">Run options</h3>

<h2 id="pull">Pull</h2>
<ul>
  <li>Download the latest translations manually from the command line (gulp)</li>
  <li>Download the latest translations real time from Qordoba Files API
  a) Plugin will check timestamps from Qordoba files API on every incoming request 
  b) Will download any updated files, write them to the fs, and update the resource bundle in i18next</li>
  <li>Load the latest translation on a preset interval
  a) Will check Qordoba for file updates on specified interval</li>
</ul>

<h2 id="push">Push</h2>
<ul>
  <li>Upload the latest source language files manually from the command line (gulp)</li>
  <li>Will upload files to Qordoba web app via the Files API so the translations can be created, edited, proofread, and pushed (deployed) for use by the qordoba-nodejs-plugin</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Qordoba</span><span class="w"> </span><span class="err">organization</span><span class="w"> </span><span class="err">id</span><span class="w">
  </span><span class="err">organization_id:</span><span class="w"> </span><span class="err">'[ORGANIZATION</span><span class="w"> </span><span class="err">ID]',</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Qordoba</span><span class="w"> </span><span class="err">project</span><span class="w"> </span><span class="err">id</span><span class="w">
  </span><span class="err">project_id:</span><span class="w"> </span><span class="err">'[PROJECT</span><span class="w"> </span><span class="err">ID]',</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Qordoba</span><span class="w"> </span><span class="err">consumer</span><span class="w"> </span><span class="err">key</span><span class="w">
  </span><span class="err">key:</span><span class="w"> </span><span class="err">'[KEY]',</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Path</span><span class="w"> </span><span class="err">To</span><span class="w"> </span><span class="err">Save</span><span class="w"> </span><span class="err">Qordoba</span><span class="w"> </span><span class="err">Keys</span><span class="w"> </span><span class="err">To</span><span class="w">
  </span><span class="err">qordobaLocalesPath:</span><span class="w"> </span><span class="err">'[PATH</span><span class="w"> </span><span class="err">TO</span><span class="w"> </span><span class="err">QORDOBA</span><span class="w"> </span><span class="err">KEYS]',</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Download</span><span class="w"> </span><span class="err">Options</span><span class="w">
  </span><span class="err">download:</span><span class="w"> </span><span class="err">'[COMMAND</span><span class="w"> </span><span class="err">LINE</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">REAL</span><span class="w"> </span><span class="err">TIME</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">INTERVAL</span><span class="w"> </span><span class="err">]',</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Upload</span><span class="w"> </span><span class="err">Options</span><span class="w"> </span><span class="err">(Source</span><span class="w"> </span><span class="err">Language,</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="err">version:</span><span class="w"> </span><span class="err">‘’</span><span class="w"> </span><span class="p">}</span><span class="err">)</span><span class="w">
  </span><span class="err">upload:</span><span class="w"> </span><span class="err">'</span><span class="p">[</span><span class="err">COMMAND</span><span class="w"> </span><span class="err">LINE</span><span class="p">]</span><span class="err">'</span><span class="w">
</span><span class="err">}</span><span class="w">
</span></code></pre>
</div>
